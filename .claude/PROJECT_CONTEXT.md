# PROJECT_CONTEXT.md

> æœ¬æ–‡ä»¶ä¸º Claude Code ç»´æŠ¤é¡¹ç›®æ—¶çš„æ ¸å¿ƒä¸Šä¸‹æ–‡å‚è€ƒæ–‡æ¡£
> æœ€åæ›´æ–°ï¼š2026-01-11

---

## é¡¹ç›®æ¦‚è¿°

| å±æ€§ | æè¿° |
|------|------|
| **äº§å“åç§°** | Grayscale ç¤¾äº¤åª’ä½“å¢é•¿å¹³å° |
| **æ ¸å¿ƒä»·å€¼** | æ¶ˆé™¤AIå­¦ä¹ å’Œä½¿ç”¨é—¨æ§›ï¼Œä¸€é”®æå‡ç¤¾äº¤åª’ä½“ç”Ÿäº§åŠ›ï¼ |
| **æŠ€æœ¯å®šä½** | Base44 BaaS å¹³å° + AI èŠå¤©æ ¸å¿ƒ |
| **é¡¹ç›®ä»£å·** | base44-app |
| **ç‰ˆæœ¬** | 0.0.0 |

### äº§å“å®šä½

Grayscale æ˜¯ä¸€ä¸ª AI é©±åŠ¨çš„ç¤¾äº¤åª’ä½“å¢é•¿å¹³å°ï¼Œé€šè¿‡æ™ºèƒ½èŠå¤©æœºå™¨äººä¸ºç”¨æˆ·æä¾›ä¸ªæ€§åŒ–çš„ç¤¾äº¤åª’ä½“å¢é•¿ç­–ç•¥ã€‚å¹³å°åŸºäº Base44 BaaS æœåŠ¡æ„å»ºï¼Œé›†æˆäº† Claude AI æ¨¡å‹å®ç°æ™ºèƒ½å¯¹è¯åŠŸèƒ½ã€‚

---

## æŠ€æœ¯æ ˆè¯¦æƒ…

### å‰ç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **React** | 18.2.0 | å‰ç«¯æ¡†æ¶ |
| **Vite** | 6.1.0 | æ„å»ºå·¥å…· |
| **react-router-dom** | 6.26.0 | è·¯ç”±ç®¡ç† |
| **@tanstack/react-query** | 5.84.1 | å¼‚æ­¥çŠ¶æ€ç®¡ç† |
| **Tailwind CSS** | 3.4.17 | æ ·å¼æ¡†æ¶ |
| **shadcn/ui (Radix UI)** | æœ€æ–° | UI ç»„ä»¶åº“ |

### åç«¯æ¶æ„

| æŠ€æœ¯ | æè¿° |
|------|------|
| **Base44 SDK** | @base44/sdk ^0.8.3 - BaaS å¹³å° SDK |
| **äº‘å‡½æ•°** | functions/ ç›®å½•ä¸‹çš„ TypeScript æ–‡ä»¶ |
| **Vite æ’ä»¶** | @base44/vite-plugin ^0.2.5 |

### AI é›†æˆ

| æ¨¡å‹ | ç”¨é€” |
|------|------|
| **Claude Sonnet 4.5** | å¤æ‚ä»»åŠ¡ã€æ·±åº¦åˆ†æ |
| **Claude Haiku 4.5** | å¿«é€Ÿå“åº”ã€ç®€å•æŸ¥è¯¢ |
| **æ™ºèƒ½è·¯ç”±** | æ ¹æ®ä»»åŠ¡å¤æ‚åº¦è‡ªåŠ¨é€‰æ‹©æ¨¡å‹ |

### UI ç»„ä»¶åº“

- **åŸºç¡€åº“**: shadcn/ui (åŸºäº Radix UI)
- **è®¾è®¡ç³»ç»Ÿ**: CSS Variables (æ”¯æŒ light/dark mode)
- **å›¾æ ‡åº“**: lucide-react ^0.475.0
- **å›¾è¡¨åº“**: recharts ^2.15.4

---

## é¡¹ç›®è§„æ¨¡

### æ–‡ä»¶ç±»å‹è§„èŒƒ

| ä½ç½® | æ–‡ä»¶ç±»å‹ | è¯´æ˜ |
|------|----------|------|
| **å‰ç«¯ (src/)** | `.jsx` | React ç»„ä»¶ |
| **åç«¯ (functions/)** | `.ts` | TypeScript äº‘å‡½æ•° |
| **é…ç½®** | `jsconfig.json` | å‰ç«¯è·¯å¾„åˆ«åé…ç½® |

### ä»£ç ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| æ€»æ–‡ä»¶æ•° | ~193 ä¸ª |
| æ€»ä»£ç è¡Œæ•° | ~40,711 è¡Œ |
| ç»„ä»¶æ•°é‡ | 105 ä¸ª |
| é¡µé¢æ•°é‡ | 18 ä¸ª |
| UI åŸºç¡€ç»„ä»¶ | 49 ä¸ª |
| äº‘å‡½æ•°æ•°é‡ | 28 ä¸ª |

### æ ¸å¿ƒ AI æ–‡ä»¶

| æ–‡ä»¶ | è¡Œæ•° | èŒè´£ |
|------|------|------|
| `functions/smartChatWithSearch.ts` | 801 | æ™ºèƒ½æœç´¢èŠå¤©æ ¸å¿ƒé€»è¾‘ |
| `functions/callAIModel.ts` | 718 | AI æ¨¡å‹è°ƒç”¨å°è£… |
| `src/components/hooks/useChatState.jsx` | 737 | èŠå¤©çŠ¶æ€ç®¡ç† Hook |
| `functions/compressConversation.ts` | 148 | å¯¹è¯å‹ç¼© |

---

## æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. AI èŠå¤©æœºå™¨äººç³»ç»Ÿ

**æ ¸å¿ƒèƒ½åŠ›:**
- å¤šæ¨¡å‹æ”¯æŒ (Sonnet 4.5 / Haiku 4.5 æ™ºèƒ½è·¯ç”±)
- ä¸Šä¸‹æ–‡å‹ç¼©å’Œ Token é¢„ç®—ç®¡ç†
- æ™ºèƒ½æœç´¢é›†æˆ
- å¯¹è¯å†å²ç®¡ç†

**å…³é”®æ–‡ä»¶:**
- `src/pages/Chat.jsx` - èŠå¤©é¡µé¢
- `src/components/chat/` - èŠå¤©ç»„ä»¶ (15ä¸ª)
- `src/components/hooks/useChatState.jsx` - çŠ¶æ€ç®¡ç†
- `functions/smartChatWithSearch.ts` - åç«¯èŠå¤©é€»è¾‘
- `functions/callAIModel.ts` - AI æ¨¡å‹è°ƒç”¨
- `functions/compressConversation.ts` - ä¸Šä¸‹æ–‡å‹ç¼©

### 2. ç”¨æˆ·ç³»ç»Ÿ

**åŠŸèƒ½æ¸…å•:**
- æ³¨å†Œ/ç™»å½•æµç¨‹
- é‚€è¯·ç ç³»ç»Ÿ
- ç§¯åˆ†/Credits ç³»ç»Ÿ
- å¥—é¤è®¢é˜…ç®¡ç†
- å·¥å•æ”¯æŒç³»ç»Ÿ

**å…³é”®æ–‡ä»¶:**
- `src/components/invite/` - é‚€è¯·ç³»ç»Ÿç»„ä»¶
- `src/components/credits/` - ç§¯åˆ†ç³»ç»Ÿç»„ä»¶
- `src/components/tickets/` - å·¥å•ç³»ç»Ÿç»„ä»¶
- `src/components/profile/` - ç”¨æˆ·èµ„æ–™ç»„ä»¶
- `functions/processInviteReward.ts` - é‚€è¯·å¥–åŠ±å¤„ç†
- `functions/completeInviteReward.ts` - å®Œæˆé‚€è¯·å¥–åŠ±

### 3. ç®¡ç†åå°

**é¡µé¢æ¸…å•:**
| é¡µé¢ | æ–‡ä»¶ | çŠ¶æ€ |
|------|------|------|
| ä»ªè¡¨ç›˜ | AdminDashboard.jsx | æ­£å¸¸ |
| ç”¨æˆ·ç®¡ç† | AdminUsers.jsx | æ­£å¸¸ |
| AI æ¨¡å‹ç®¡ç† | AdminModels.jsx | æ­£å¸¸ |
| å¥—é¤ç®¡ç† | AdminPackages.jsx | æ­£å¸¸ |
| Prompt ç®¡ç† | AdminPrompts.jsx | æ­£å¸¸ |
| é‚€è¯·ç ç®¡ç† | AdminInvitations.jsx | æ­£å¸¸ |
| äº¤æ˜“è®°å½• | AdminTransactions.jsx | æ­£å¸¸ |
| è´¢åŠ¡ç®¡ç† | AdminFinance.jsx | æ­£å¸¸ |
| å·¥å•ç®¡ç† | AdminTickets.jsx | æ­£å¸¸ |
| å…¬å‘Šç®¡ç† | AdminAnnouncements.jsx | æ­£å¸¸ (1,116è¡Œ) |
| ç³»ç»Ÿè®¾ç½® | AdminSettings.jsx | æ­£å¸¸ |
| ç²¾é€‰ç®¡ç† | AdminFeatured.jsx | **æœªå®ç°** (ç©ºæ–‡ä»¶) |

### 4. å¸‚åœºä¸æ¨¡æ¿ç³»ç»Ÿ

**å…³é”®æ–‡ä»¶:**
- `src/pages/Marketplace.jsx` - å¸‚åœºé¡µé¢
- `src/pages/Templates.jsx` - æ¨¡æ¿ç®¡ç†
- `src/components/marketplace/` - å¸‚åœºç»„ä»¶

---

## å·²çŸ¥æŠ€æœ¯å€ºåŠ¡

### 1. ç´§æ€¥é—®é¢˜ ğŸ”´

| é—®é¢˜ | ä½ç½® | å½±å“ | å»ºè®® |
|------|------|------|------|
| è¶…å¤§æ–‡ä»¶ | `AdminAnnouncements.jsx` (48,524è¡Œ) | ç»´æŠ¤å›°éš¾ã€æ€§èƒ½é£é™© | æ‹†åˆ†ä¸ºå¤šä¸ªå­ç»„ä»¶ |
| å¤§å‹äº‘å‡½æ•° | `smartChatWithSearch.ts` (31,478è¡Œ) | éƒ¨ç½²æ—¶é—´é•¿ã€è°ƒè¯•å›°éš¾ | æ¨¡å—åŒ–é‡æ„ |

### 2. å¾…å®ç°åŠŸèƒ½ ğŸŸ¡

| åŠŸèƒ½ | ä½ç½® | çŠ¶æ€ |
|------|------|------|
| ç²¾é€‰ç®¡ç† | `AdminFeatured.jsx` | ç©ºæ–‡ä»¶ (0å­—èŠ‚) |

### 3. æ–‡æ¡£ç°çŠ¶ ğŸŸ¢

**å·²æœ‰æ–‡æ¡£:**
- `CLAUDE_CODE_INSTRUCTIONS.md` - Claude Code ä½¿ç”¨æŒ‡å—
- `HANDOFF_GUIDE.md` - äº¤æ¥æŒ‡å—
- `DESIGN_SYSTEM_PROGRESS.md` - è®¾è®¡ç³»ç»Ÿè¿›åº¦

**å»ºè®®:** è¯„ä¼°æ˜¯å¦éœ€è¦æ•´åˆåˆ° `.claude/` çŸ¥è¯†åº“ç³»ç»Ÿ

### 4. é…ç½®è¾¹ç•Œ

| é…ç½®æ–‡ä»¶ | ç”¨é€” |
|----------|------|
| `jsconfig.json` | å‰ç«¯è·¯å¾„åˆ«å (@/ æ˜ å°„åˆ° src/) |
| `components.json` | shadcn/ui ç»„ä»¶é…ç½® |

---

## å½“å‰é¡¹ç›®çŠ¶æ€

| å±æ€§ | çŠ¶æ€ |
|------|------|
| **å¼€å‘é˜¶æ®µ** | ç”Ÿäº§è¿è¡Œä¸­ |
| **æœ€åæ›´æ–°** | 2026-01-11 |
| **ç»´æŠ¤æ¨¡å¼** | å‡†å¤‡æ¥å…¥ Claude Code é•¿æœŸç»´æŠ¤ |
| **ä»£ç åˆ†æ”¯** | `claude/sync-main-branch-I79Bq` |

---

## å¿«é€Ÿå‚è€ƒ

### å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# ä»£ç æ£€æŸ¥
npm run lint
npm run lint:fix

# ç±»å‹æ£€æŸ¥
npm run typecheck

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview
```

### ç›®å½•å¿«é€Ÿç´¢å¼•

```
src/
â”œâ”€â”€ api/          # Base44 SDK API å°è£…
â”œâ”€â”€ components/   # React ç»„ä»¶
â”œâ”€â”€ hooks/        # å…¨å±€ Hooks
â”œâ”€â”€ lib/          # å·¥å…·åº“ (Auth, è·¯ç”±)
â”œâ”€â”€ pages/        # é¡µé¢ç»„ä»¶
â””â”€â”€ utils/        # å·¥å…·å‡½æ•°

functions/        # åç«¯äº‘å‡½æ•° (TypeScript)
```

---

*æœ¬æ–‡ä»¶ç”± Claude Code è‡ªåŠ¨ç”Ÿæˆï¼Œå¦‚æœ‰æ›´æ–°è¯·åŒæ­¥ç»´æŠ¤*
